<script src="dist/q2tools.js">
    
</script>
<script type="text/javascript">
    var extractor = new Quake2Tools.PakExtractor(false);
    var paginationSize = 50;
    var globalArchive = null;

    function displayArchive(archive) {
        globalArchive = archive;
        loadArchivePage(0);
        displayPaginationButtons();
    }

    function displayPaginationButtons() {
        var paginationButtonList = document.getElementById("paginationButtonList");
        var paginationButtonListMarkup = "";
        
        var numberOfButtons = globalArchive.lumps.length / paginationSize;

        for (var i =0 ; i< numberOfButtons; i++) {
            paginationButtonListMarkup += createPaginationButton(i);
        }
        paginationButtonList.innerHTML = paginationButtonListMarkup;
    }

    function loadArchivePage(pageNumber) {
        var lumpTable = document.getElementById("lumpTableBody");
        var tableDataMarkup = "";
        lumpTable.innerHTML = tableDataMarkup;
        
        var startIndex = (pageNumber * paginationSize);
        var endIndex = startIndex + paginationSize;

        for (var i = startIndex; i < endIndex; i++) {
            tableDataMarkup += createTableRow(globalArchive.lumps[i].name, (globalArchive.lumps[i].length / 1024).toFixed(2));
        }

        lumpTable.innerHTML = tableDataMarkup;
    }

    function createTableRow() {
        var markup = "";
        for (var a=0; a < arguments.length; a++) {
            markup += createTableColumn(arguments[a]);
        }
        return "<tr>" + markup + "</tr>";
    }

    function createTableColumn(data) {
        return "<td>"+data+"</td>";
    }
    function createPaginationButton(pageNumber) {
        return '<button onclick="loadArchivePage('+pageNumber+')">'+(pageNumber + 1)+'</button>';
    }
</script>

<input type="file" id="fileModel" onchange="extractor.setPakFile(event)" /><br/>
<button id="btnView" onclick="extractor.extractArchive(displayArchive)">View Archive</button>

<h3>Lumps</h3>
<table border="1">
    <thead>
        <th>Path</th>
        <th>Size (KB)</th>
    </thead>
    <tbody id="lumpTableBody">
        
    </tbody>
</table>
<div id="paginationButtonList">
    
</div>